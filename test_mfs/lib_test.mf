// Test the new library functions
import { staccato, legato, accent } from "../lib/articulation.mf";
import { trill, arpeggio, glissando } from "../lib/ornaments.mf";
import { euclidean, swing } from "../lib/rhythm.mf";
import { majorTriad, majorScale, QUARTER, EIGHTH } from "../lib/theory.mf";

title("Library Function Test");
ppq(480);
tempo(120);

export proc main() {
  track(midi, main, {}) {
    // Test articulations
    staccato(C4, QUARTER, 80);
    legato(D4, QUARTER, 80);
    accent(E4, QUARTER, 80);
    rest(QUARTER);

    // Test trill
    trill(C4, QUARTER, 2);
    rest(QUARTER);

    // Test chord functions
    const cmajor = majorTriad(C4);
    arpeggio(cmajor, QUARTER);
    rest(QUARTER);

    // Test scale
    const cscale = majorScale(C4);
    forEach(cscale, p => note(p, EIGHTH));

    // Test glissando
    glissando(C4, C5, QUARTER * 2);
    rest(QUARTER);

    // Test euclidean rhythm
    euclidean(8, 5, EIGHTH, C4);
  }
}
