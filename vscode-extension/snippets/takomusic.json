{
  "Main Entry Point": {
    "prefix": "main",
    "body": [
      "export fn main() -> Score {",
      "\treturn score {",
      "\t\ttempo { 1:1 -> 120bpm; }",
      "\t\tmeter { 1:1 -> 4/4; }",
      "",
      "\t\tsound \"piano\" kind instrument {",
      "\t\t\tlabel \"Piano\";",
      "\t\t}",
      "",
      "\t\ttrack \"Piano\" role Instrument sound \"piano\" {",
      "\t\t\tplace 1:1 clip {",
      "\t\t\t\tnote(C4, q);",
      "\t\t\t\t$0",
      "\t\t\t};",
      "\t\t}",
      "\t};",
      "}"
    ],
    "description": "Create a v3 main entry point"
  },
  "Score Block": {
    "prefix": "score",
    "body": [
      "score {",
      "\t$0",
      "}"
    ],
    "description": "Score block"
  },
  "Sound Declaration": {
    "prefix": "sound",
    "body": [
      "sound \"${1:id}\" kind ${2|instrument,drumKit,vocal,fx|} {",
      "\tlabel \"${3:Label}\";",
      "\t$0",
      "}"
    ],
    "description": "Sound declaration"
  },
  "Track Declaration": {
    "prefix": "track",
    "body": [
      "track \"${1:Track}\" role ${2|Instrument,Drums,Vocal,Automation|} sound \"${3:soundId}\" {",
      "\tplace 1:1 clip {",
      "\t\t$0",
      "\t};",
      "}"
    ],
    "description": "Track declaration"
  },
  "Clip Block": {
    "prefix": "clip",
    "body": [
      "clip {",
      "\tnote(C4, q);",
      "\t$0",
      "}"
    ],
    "description": "Clip block"
  },
  "Note": {
    "prefix": "note",
    "body": [
      "note(${1:C4}, ${2:q});"
    ],
    "description": "Note event"
  },
  "Chord": {
    "prefix": "chord",
    "body": [
      "chord([${1:C4}, ${2:E4}, ${3:G4}], ${4:q});"
    ],
    "description": "Chord event"
  },
  "Hit": {
    "prefix": "hit",
    "body": [
      "hit(${1|kick,snare,hhc,hho,crash,ride,tom1,tom2,tom3|}, ${2:q});"
    ],
    "description": "Drum hit (DrumKey is an identifier, not a string)"
  },
  "Rest": {
    "prefix": "rest",
    "body": [
      "rest(${1:q});"
    ],
    "description": "Rest event"
  },
  "Import": {
    "prefix": "imp",
    "body": [
      "import { ${1:name} } from \"${2:./module.mf}\";"
    ],
    "description": "Import from module"
  },
  "Import Std": {
    "prefix": "imp-std",
    "body": [
      "import { ${1:repeat} } from \"std:${2|core,time,random,transform,curves,theory,drums,vocal|}\";"
    ],
    "description": "Import from std module"
  },
  "Tempo Block": {
    "prefix": "tempo",
    "body": [
      "tempo {",
      "\t1:1 -> ${1:120}bpm;",
      "}"
    ],
    "description": "Tempo block"
  },
  "Meter Block": {
    "prefix": "meter",
    "body": [
      "meter {",
      "\t1:1 -> ${1:4}/${2:4};",
      "}"
    ],
    "description": "Meter block"
  },
  "Match Expression": {
    "prefix": "match",
    "body": [
      "match (${1:value}) {",
      "\t${2:pattern} -> ${3:result};",
      "\telse -> ${4:default};",
      "}"
    ],
    "description": "Match expression with patterns"
  },
  "Match Event Type": {
    "prefix": "match-event",
    "body": [
      "match (${1:e}.type) {",
      "\t\"note\" -> ${2:handleNote};",
      "\t\"chord\" -> ${3:handleChord};",
      "\telse -> ${4:e};",
      "}"
    ],
    "description": "Match on event type field (use e.type, not type patterns)"
  },
  "MapEvents": {
    "prefix": "mapEvents",
    "body": [
      "mapEvents(${1:c}, fn(e) {",
      "\treturn match (e.type) {",
      "\t\t\"note\" -> {",
      "\t\t\tconst vel = e.velocity ?? ${2:0.7};",
      "\t\t\treturn updateEvent(e, { velocity: vel * ${3:0.8} });",
      "\t\t};",
      "\t\telse -> e;",
      "\t};",
      "})"
    ],
    "description": "Map events with type matching"
  },
  "Null Coalescing": {
    "prefix": "??",
    "body": [
      "${1:value} ?? ${2:default}"
    ],
    "description": "Null coalescing operator"
  },
  "Function Definition": {
    "prefix": "fn",
    "body": [
      "fn ${1:name}(${2:params}) -> ${3:Clip} {",
      "\treturn ${4:clip {",
      "\t\t$0",
      "\t}};",
      "}"
    ],
    "description": "Function definition"
  },
  "Automation": {
    "prefix": "automation",
    "body": [
      "automation(\"${1:param}\", ${2:0}, ${3:q * 4}, ${4:linear(0.0, 1.0, 16)});"
    ],
    "description": "Automation event"
  },
  "Vocal Part": {
    "prefix": "vocal-part",
    "body": [
      "fn ${1:vocalPart}() -> Clip {",
      "\tlet c = clip {",
      "\t\tnote(${2:C4}, q, vel: 0.75);",
      "\t\t$0",
      "\t};",
      "\tconst lyr = vocal.text(\"${3:lyrics}\", \"${4:en-US}\");",
      "\tc = vocal.align(c, lyr);",
      "\tc = vocal.autoBreath(c);",
      "\treturn vocal.vibrato(c, depth: ${5:0.2});",
      "}"
    ],
    "description": "Vocal part with lyrics and expression"
  },
  "Import All Std": {
    "prefix": "imp-std-all",
    "body": [
      "import * as ${1:module} from \"std:${2|core,time,random,transform,curves,theory,drums,vocal|}\";"
    ],
    "description": "Import all from std module"
  }
}
